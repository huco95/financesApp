!function(e){function t(t){for(var a,d,i=t[0],s=t[1],l=t[2],u=0,m=[];u<i.length;u++)d=i[u],Object.prototype.hasOwnProperty.call(o,d)&&o[d]&&m.push(o[d][0]),o[d]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(c&&c(t);m.length;)m.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,i=1;i<n.length;i++){var s=n[i];0!==o[s]&&(a=!1)}a&&(r.splice(t--,1),e=d(d.s=n[0]))}return e}var a={},o={0:0},r=[];function d(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.m=e,d.c=a,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},d.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)d.d(n,a,function(t){return e[t]}.bind(null,a));return n},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="";var i=window.webpackJsonp=window.webpackJsonp||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=s;r.push([32,2]),n()}({10:function(e,t,n){"use strict";t.a={register:function(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("Service worker registered.",e)})})}}},30:function(e,t){if("undefined"==typeof moment){var n=new Error("Cannot find module 'moment'");throw n.code="MODULE_NOT_FOUND",n}e.exports=moment},32:function(e,t,n){"use strict";n.r(t);n(27);var a=n(11),o=n.n(a),r=n(34),d=n(35),i=n(36),s=n(40),l=Object(r.a)(new Date),c=Object(d.a)(new Date);var u={getInitDate:function(){return l},updateInitDate:function(e){l=e},getInitDateMiliseconds:function(){return Object(i.a)(l)},getEndDate:function(){return c},updateEndDate:function(e){c=e},getEndDateMiliseconds:function(){return Object(i.a)(c)},getLocale:function(){return s.a}};var m={render:function(){const e=document.getElementById("totalsDiv");var t=new XMLHttpRequest;t.onreadystatechange=()=>{t.readyState==XMLHttpRequest.DONE&&(200==t.status?e.innerHTML=t.response:console.log("ERROR"))},t.open("get","/incomesExpensesStats?initDate="+u.getInitDateMiliseconds()+"&endDate="+u.getEndDateMiliseconds(),!0),t.send()}},g=n(13),v=n.n(g);const p=document.getElementById("monthsChart").getContext("2d");var y;var f={render:function(){var e=new XMLHttpRequest;e.onreadystatechange=()=>{if(e.readyState==XMLHttpRequest.DONE)if(200==e.status){null!=y&&y.destroy();var t=JSON.parse(e.response),n=t.chart;n.options={responsive:!0,maintainAspectRatio:!0,aspectRatio:2,scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]},legend:{display:!1},animation:{animateScale:!0,animateRotate:!0},tooltips:{enabled:!0,position:"average",mode:"index",intersect:!1}},null!=y&&y.destroy(),y=new v.a(p,n),document.getElementById("monthsChartDivLegend").innerHTML=t.lengedsHtml}else console.log("ERROR")},e.open("get","/monthsChart",!0),e.send()}};const E=document.getElementById("categroyChartPie").getContext("2d");var h;var M={render:function(){var e=new XMLHttpRequest;e.onreadystatechange=()=>{if(e.readyState==XMLHttpRequest.DONE)if(200==e.status){var t=JSON.parse(e.response),n=t.chart;n.options={responsive:!0,maintainAspectRatio:!0,aspectRatio:2,cutoutPercentage:75,legend:{display:!1,labels:{generateLabels:e=>{const t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((n,a)=>{const o=e.getDatasetMeta(0),r=o.controller.getStyle(a);return{text:n+" ["+t.datasets[0].data[a]+"]",fillStyle:r.backgroundColor,strokeStyle:r.borderColor,lineWidth:r.borderWidth,hidden:isNaN(t.datasets[0].data[a])||o.data[a].hidden,index:a}}):[]}}},animation:{animateScale:!0,animateRotate:!0}},null!=h&&h.destroy(),h=new v.a(E,n),document.getElementById("categroyChartPieLegend").innerHTML=t.lengedsHtml}else console.log("ERROR")},e.open("get","/categoryChartPie?initDate="+u.getInitDateMiliseconds()+"&endDate="+u.getEndDateMiliseconds(),!0),e.send()}};var L={render:function(){m.render(),f.render(),M.render()}},D=n(37),b=n(39);const I=document.getElementById("movesDiv"),O=document.getElementById("moveModal"),R=document.getElementById("deleteMoveBtn"),w=document.getElementById("postMovement"),B=document.getElementById("idInput"),S=document.getElementById("categoryInput");function H(){var e=new XMLHttpRequest;e.onreadystatechange=()=>{e.readyState==XMLHttpRequest.DONE&&(200==e.status?I.innerHTML=e.response:console.log("ERROR"))},e.open("get","/getMovesDate?initDate="+u.getInitDateMiliseconds()+"&endDate="+u.getEndDateMiliseconds(),!0),e.send()}function x(){var e=new XMLHttpRequest,t=w.elements.type.value;e.onreadystatechange=()=>{e.readyState==XMLHttpRequest.DONE&&(200==e.status?S.innerHTML=e.response:console.log("ERROR"))},e.open("get","/getCategories?type="+t,!1),e.send()}function T(e){1==e.parentElement.childElementCount?e.parentElement.parentElement.remove():e.remove()}function j(e,t){let n,a=31,o=!0;const r=document.querySelectorAll('[id^="movesGroup-"]'),d="movesGroup-"+Object(b.a)(new Date(e),"ddMMyyyy",{locale:u.getLocale()}),i=Object(b.a)(new Date(e),"dd",{locale:u.getLocale()});for(let e of r){if(e.id===d){n=e,o=!1;break}{let t=i-e.dataset.day;Math.abs(a)>Math.abs(t)&&(a=t,n=e)}}if(o){let o=document.createElement("div");o.id=d,o.dataset.day=i;let r="<div class='moveDate font-weight-bold p-2'>"+Object(b.a)(new Date(e),"dd MMMM yyyy",{locale:u.getLocale()})+"</div>";o.innerHTML=r+"<div class='bg-white px-2 py-1'>"+t+"</div>",a>0?I.insertBefore(o,n):a<0&&I.insertBefore(o,n.nextSibling);const s=document.getElementById("noMovesDiv");null!=s&&s.remove()}else n.children[1].innerHTML+=t}var C={initialize:function(){!function(){for(var e=w.elements.type,t=0;t<e.length;t++)e[t].onclick=()=>{x()}}(),w.addEventListener("submit",e=>{e.preventDefault();let t=""===B.value,n=B.value;if(w.checkValidity()){var a=new XMLHttpRequest;a.onreadystatechange=()=>{if(a.readyState==XMLHttpRequest.DONE)if(200==a.status){o.a.getInstance(O).hide();let e=JSON.parse(a.response),r=e.move.date,d=e.moveHtml;if(Object(D.a)(new Date(r),{start:u.getInitDate(),end:u.getEndDate()})){if(t)j(r,d);else{let e="movesGroup-"+Object(b.a)(new Date(r),"ddMMyyyy",{locale:u.getLocale()}),t=document.getElementById(n);t.parentElement.parentElement.id==e?t.outerHTML=d:(T(t),j(r,d))}L.render()}}else console.log("ERROR")},t?a.open("post","/addMove",!0):a.open("post","/updateMove",!0),a.send(new FormData(e.target))}else w.classList.add("was-validated")}),O.addEventListener("hide.bs.modal",(function(e){w.reset(),w.classList.remove("was-validated")})),O.addEventListener("show.bs.modal",(function(e){var t,n,a=e.relatedTarget,o=a.getAttribute("data-action");O.querySelector(".modal-title"),"edit"==o?(t=a.id,(n=new XMLHttpRequest).onreadystatechange=()=>{if(n.readyState==XMLHttpRequest.DONE)if(200==n.status){const e=JSON.parse(n.response);w.elements.moveId.value=e._id,w.elements.amount.value=e.amount,w.elements.type.value=e.type,x(),w.elements.description.value=e.description,w.elements.category.value=e.category,w.elements.date.value=Object(b.a)(new Date(e.date),"yyyy-MM-dd",{locale:u.getLocale()})}else console.log("ERROR")},n.open("get","/getMove?id="+t,!1),n.send(),O.querySelector(".modal-title").textContent="Editar moviemiento",R.removeAttribute("hidden")):(x(),O.querySelector(".modal-title").textContent="Nuevo movimiento",R.setAttribute("hidden",!0))})),R.addEventListener("click",()=>{var e,t;e=w.elements.moveId.value,(t=new XMLHttpRequest).onreadystatechange=()=>{t.readyState==XMLHttpRequest.DONE&&(200==t.status?(T(document.getElementById(e)),0==I.childElementCount&&H(),L.render()):console.log("ERROR"))},t.open("post","/deleteMove?id="+e,!0),t.send(),o.a.getInstance(O).hide()})},render:H},k=n(38);const q=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],N=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],X=document.getElementById("yearSelected");var A,P,J;const _=document.getElementById("yearsContainer");function Y(){_.innerHTML="";var e=parseInt(J.toString().slice(-1)),t=J-e-1,n=t+12;document.getElementById("yearsRange").innerText=parseInt(t)+"-"+(parseInt(n)-1);for(var a=t;a<n;a++)_.appendChild(z(a));_.classList.remove("hidden"),document.getElementById("navYears").classList.remove("hidden"),document.getElementById("monthsContainer").classList.add("hidden"),document.getElementById("navYear").classList.add("hidden")}function z(e){var t=document.createElement("div");return t.innerText=e,t.id="year-"+e,t.dataset.year=e,e==J&&t.classList.add("month-selected"),t.addEventListener("click",e=>{F(e)}),t}function F(e){J=e.target.dataset.year,X.innerText=J,_.classList.add("hidden"),document.getElementById("navYears").classList.add("hidden"),document.getElementById("monthsContainer").classList.remove("hidden"),document.getElementById("navYear").classList.remove("hidden")}var W={initialize:function(){P=(new Date).getMonth(),J=(new Date).getFullYear(),document.getElementById("monthDiv").innerHTML=N[P],document.getElementById("yearDiv").innerHTML=J,X.innerText=J,A=new o.a(document.getElementById("monthSelectorModal"),{}),document.getElementById("monthSelector").addEventListener("click",()=>{A.show()}),q.forEach((e,t)=>{var n,a,o;document.getElementById("monthsContainer").appendChild((n=e,a=t,(o=document.createElement("div")).innerText=n,o.id="month-"+a,o.dataset.month=a,a==P&&o.classList.add("month-selected"),o.addEventListener("click",e=>{!function(e){const t=document.getElementById("month-"+P);var n,a;null!=t&&t.classList.remove("month-selected"),e.target.classList.add("month-selected"),P=parseInt(e.target.dataset.month),n=P+1,a=Object(k.a)(J+"-"+n,"yyyy-MM",new Date),u.updateInitDate(Object(r.a)(a)),u.updateEndDate(Object(d.a)(a)),L.render(),C.render(),document.getElementById("monthDiv").innerHTML=N[P],document.getElementById("yearDiv").innerHTML=J,A.hide()}(e)}),o))}),document.getElementById("prevYear").addEventListener("click",()=>{X.innerText=--J}),document.getElementById("nextYear").addEventListener("click",()=>{X.innerText=++J}),X.addEventListener("click",()=>{Y()}),document.getElementById("prevDecadeBtn").addEventListener("click",()=>{J-=10,Y()}),document.getElementById("nextDecadeBtn").addEventListener("click",()=>{J+=10,Y()})}};n(10).a.register(),window.onload=()=>{W.initialize(),L.render(),C.initialize(),C.render()}}});